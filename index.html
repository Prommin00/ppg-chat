<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>PPG ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏Ç‡∏≤‡∏ì‡∏∏‡∏ß‡∏£‡∏•‡∏±‡∏Å‡∏©‡∏ö‡∏∏‡∏£‡∏µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="topbar">
  <span>PPG ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏Ç‡∏≤‡∏ì‡∏∏‡∏ß‡∏£‡∏•‡∏±‡∏Å‡∏©‡∏ö‡∏∏‡∏£‡∏µ</span>
  <div>
    <a href="history.html">üìù ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</a>
  </div>
</nav>

<h2 class="title">PPG ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏Ç‡∏≤‡∏ì‡∏∏‡∏ß‡∏£‡∏•‡∏±‡∏Å‡∏©‡∏ö‡∏∏‡∏£‡∏µ</h2>

<div class="chat-container">
  <div id="chat-box" class="chat-box"></div>
  <div class="input-area">
    <input id="user-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°..." autocomplete="off">
    <button id="send-btn">‡∏™‡πà‡∏á</button>
  </div>
</div>

<!-- FAQ Button -->
<button class="btn-faq" onclick="openFAQModal()" title="‡∏î‡∏π‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢">
  ‚ùì
</button>

<!-- FAQ Modal -->
<div id="faqModal" class="faq-modal">
  <div class="faq-modal-content">
    <div class="faq-modal-header">
      <h3><span>üìö</span> ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢ (FAQ)</h3>
      <button class="btn-close-modal" onclick="closeFAQModal()">‚úï</button>
    </div>

    <div class="faq-modal-body">
      <div class="faq-search">
        <input type="text" id="faqSearch" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°..." onkeyup="searchFAQ()">
      </div>

      <div class="quick-actions">
        <button class="quick-action-btn" onclick="askFromFAQ('‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏´‡∏ô')">‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î</button>
        <button class="quick-action-btn" onclick="askFromFAQ('‡∏á‡∏≤‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á')">üßæ ‡∏á‡∏≤‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
        <button class="quick-action-btn" onclick="askFromFAQ('‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á')">üéâ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
      </div>

      <div id="faqList"></div>
    </div>
  </div>
</div>

<script src="config.js"></script>
<script src="faq_data.js"></script>
<script src="script.js"></script>

<script>
  function openFAQModal() {
    document.getElementById('faqModal').classList.add('active');
    document.getElementById('faqSearch').value = '';
    renderFAQList();
    setTimeout(() => document.getElementById('faqSearch').focus(), 50);
  }

  function closeFAQModal() {
    document.getElementById('faqModal').classList.remove('active');
  }

  function renderFAQList() {
    const list = document.getElementById('faqList');
    const items = window.PPG_FAQ || [];
    if (!items.length) {
      list.innerHTML = '<div class="faq-empty"><div class="faq-empty-icon">üì≠</div><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ FAQ</p></div>';
      return;
    }
    list.innerHTML = items.map((it, idx) => `
      <div class="faq-item" data-question="${escapeHtml(it.q)}" data-answer="${escapeHtml(it.a)}" onclick="toggleFAQItem(this)">
        <div class="faq-question">
          <span class="faq-number">${idx + 1}</span>
          <span class="faq-text">${escapeHtml(it.q)}</span>
          <span class="faq-arrow">‚ñº</span>
        </div>
        <div class="faq-answer">${escapeHtml(it.a)}</div>
      </div>
    `).join('');
  }

  function toggleFAQItem(item) {
    const wasActive = item.classList.contains('active');
    document.querySelectorAll('.faq-item.active').forEach(el => el.classList.remove('active'));
    if (!wasActive) item.classList.add('active');
  }

  function searchFAQ() {
    const searchTerm = document.getElementById('faqSearch').value.toLowerCase();
    const items = document.querySelectorAll('.faq-item');
    let visibleCount = 0;

    items.forEach(item => {
      const question = item.dataset.question.toLowerCase();
      const answer = item.dataset.answer.toLowerCase();
      if (question.includes(searchTerm) || answer.includes(searchTerm)) {
        item.style.display = 'block';
        visibleCount++;
      } else {
        item.style.display = 'none';
      }
    });

    const faqList = document.getElementById('faqList');
    const existingEmpty = faqList.querySelector('.faq-empty');
    if (visibleCount === 0 && !existingEmpty) {
      const emptyDiv = document.createElement('div');
      emptyDiv.className = 'faq-empty';
      emptyDiv.innerHTML = '<div class="faq-empty-icon">üîç</div><p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>';
      faqList.appendChild(emptyDiv);
    } else if (visibleCount > 0 && existingEmpty) {
      existingEmpty.remove();
    }
  }

  // Escape helper for templates
  function escapeHtml(str){
    return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
  }

  // Close modal when clicking outside
  document.getElementById('faqModal').addEventListener('click', function(e) {
    if (e.target === this) closeFAQModal();
  });

  // Close modal with ESC key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      const modal = document.getElementById('faqModal');
      if (modal.classList.contains('active')) closeFAQModal();
    }
  });

  // Render once in case user searches immediately
  renderFAQList();
</script>
<!-- FAQ Floating Button -->
<button class="faq-fab" id="faqFab" title="FAQ">‚ùì</button>

<!-- FAQ Panel -->
<div class="faq-panel" id="faqPanel">
  <div class="faq-header">
    <span>üìö ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢ (FAQ)</span>
    <button id="faqClose" class="faq-close" type="button">‚úñ</button>
  </div>

  <div class="faq-body">
    <input class="faq-search" id="faqSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°..." />

    <div class="faq-chips">
      <button class="faq-chip" type="button" data-tag="‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î">üïí ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î</button>
      <button class="faq-chip" type="button" data-tag="‡∏á‡∏≤‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô">üìÑ ‡∏á‡∏≤‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>
      <button class="faq-chip" type="button" data-tag="‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°">üéâ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
    </div>

    <div class="faq-list" id="faqList"></div>
  </div>
</div>
</body>
</html>
